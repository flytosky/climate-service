@(servicePage: String, confItems: List[ServiceConfigurationItem], serviceLog: ServiceExecutionLog)

@import helper._

@scripts = {
	<script type="text/javascript">
	window.onload = function() {
		var value = "";
		var parameterPurpose = "";
		var parameterRule = "";
		
		var seperator = "  |  ";
		@for(confItem <- confItems) {
			var parameterType = "";
			var parameterValue = "";
			var parameterDefaultValue = "";
			parameterPurpose = "@confItem.getParameterPurpose()";
			parameterRule = "@confItem.getParameterRule()";
			value = "@confItem.getValue()";
			parameterType = parameterRule.split("*|")[1].split("|*")[1];
			parameterValue = parameterRule.split("*|")[2].split("|*")[1];
			parameterDefaultValue = parameterRule.split("*|")[3].split("|*")[1];
			
			var res = parameterPurpose.split(" ");
			var name = res[0];
			for (i = 1; i < res.length; i++) {
				var temp = res[i].charAt(0).toUpperCase();
				temp += res[i].substring(1);
				name += temp;
			}
			
			
			console.log(name + seperator + value + seperator + parameterType + seperator + parameterValue + seperator + parameterDefaultValue);

			switch (parameterType) {
				case "Input text":
					document.getElementById(name).value = value;		           
		            break;
		        case "Input area":
		        	document.getElementById(name).innerHTML = value;
		            break;
		        case "Multiple selects":
		        	var paraArr = parameterDefaultValue.split(",");
		        	var checkedPara = value.split(",");
		        	
		        	for (var i =0; i<paraArr.length;i++) {
		        		$( 'input' ).filter('[value="'+paraArr[i]+'"]').prop( "checked", false );
		        	}
		        	for (var i =0; i<checkedPara.length;i++) {
		        		$( 'input' ).filter('[value="'+checkedPara[i]+'"]').prop( "checked", true );
		        	}
		        	//$( 'input' ).filter('[value="6"]').prop( "checked", false );
		            break;
		        case "Radio button":
		        	$( "#colorScale" + value).prop( "checked", true );
		            break;
		        case "Dropdown list":
		        	$( 'option:contains("'+value+'")').attr('selected','selected');
		            break;
		        default:
		            
			}					
		}
		//only for testing
		//document.getElementById('startTime').value = parameterType;
		
		document.getElementById("Purpose1").innerHTML = "@serviceLog.getPurpose()";
		document.getElementById("serviceImg").src = "@serviceLog.getPlotUrl()";
		document.getElementById("comment").value = "@serviceLog.getDataUrl()";
/*		
=======
			var res = parameterPurpose.split(" ");
			var name = res[0];
			for (i = 1; i < res.length; i++) {
				var temp = res[i].charAt(0).toUpperCase();
				temp += res[i].substring(1);
				name += temp;
			}
			console.log(name + value + parameterType + parameterValue + parameterDefaultValue);
			
			if (parameterType == "Input text" ) {
				document.getElementById(name).value = value;
			}
		
		
		document.getElementById("serviceImg").src = "@serviceLog.getPlotUrl()";
		document.getElementById("comment").value = "@serviceLog.getDataUrl()";
		
>>>>>>> 24d068dd3a275d9761f68b848be370b1843372b0
*/
	}
	</script>
}

@main("Service Details", scripts) {
	@Html(servicePage)
}
